# Staging environment configuration for Firebase App Hosting
# For a complete reference, see https://firebase.google.com/docs/app-hosting/config
runConfig:
    minInstances: 0
    maxInstances: 1
    concurrency: 10
    cpu: 1
    memoryMiB: 512
    timeoutSeconds: 60
spec:
    # Represents the latest backend API version. Do not overwrite this field.
    apiVersion: apphosting.googleapis.com/v1alpha
    # The ID of the backend. This is used to identify the backend in the Firebase console.
    backendID: fullcircle-stage
    # The runtime for the backend. For Node.js, use the format "nodejsXX".
    runtime: nodejs22
    # Environment variables for the backend
    environmentVariables:
        # Reference to secrets stored in Google Cloud Secret Manager
        EMAIL_USER:
            secretRef:
                secretVersion: projects/191965811250/secrets/EMAIL_USER/versions/latest
        EMAIL_PASS:
            secretRef:
                secretVersion: projects/191965811250/secrets/EMAIL_PASS/versions/latest
    # The build configuration for the backend
    build:
        # The command to build your application
        # For Node.js applications, this is typically empty if using standard npm start
        command: "npm run build"
        # The root directory of the application, relative to the repository root
        root: .
    # The serving configuration for the backend
    serving:
        minInstances: 0
        maxInstances: 1
        concurrency: 10
        cpu: 1
        memoryMiB: 512
        timeoutSeconds: 60
